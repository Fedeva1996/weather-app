{"ast":null,"code":"import{useState}from\"react\";import db from\"../db.json\";import{useDispatch,useSelector}from\"react-redux\";import{setCoords,setSaveCities,removeSaveCities}from\"../redux/reducers\";import{Add,Thrash}from\"../Images/svg\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Search=props=>{const[filter,setFilter]=useState(\"\");const cities=db.ciudades;const dispatch=useDispatch();const saveCities=useSelector(state=>state.saveCities.value);const handleSearch=event=>{setFilter(event.target.value);};const handleClick=ciudad=>{const ciudadCoords=[ciudad.lat,ciudad.lon];//console.log(ciudadCoords);\ndispatch(setCoords(ciudadCoords));setFilter(\"\");};const handleAddCity=ciudad=>{const ciudadCoords=[ciudad.lat,ciudad.lon];//console.log(ciudadCoords);\ndispatch(setSaveCities(ciudadCoords));setFilter(\"\");};const handleRemoveCity=ciudad=>{const ciudadCoords=[ciudad.lat,ciudad.lon];//console.log(ciudadCoords);\ndispatch(removeSaveCities(ciudadCoords));};const checkInclude=ciudad=>{let includes=saveCities.some(a=>saveCities.length&&ciudad.every((v,i)=>v===a[i]));return includes;};const Ciudades=_ref=>{let{filter}=_ref;const results=cities.filter(city=>city.nombre.toLowerCase().includes(filter.toLowerCase()));//console.log(results);\nif(filter===\"\"){return;}if(results.length>0){if(results.length<5){return/*#__PURE__*/_jsx(\"div\",{className:\"absolute left-0 right-0 bottom-full sm:bottom-auto sm:mb-2 flex flex-col items-left justify-center gap-2 overflow-y-auto min-w-full max-h-52 z-10 bg-slate-300 dark:bg-slate-600 rounded-md sm:rounded-md\",children:results.map(city=>/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-1 hover:bg-slate-500 dark:hover:bg-slate-500\",title:\"Agregar a favoritos\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleClick(city),className:\"flex items-center justify-between gap-2 p-2 text-lg font-semibold h-full w-full\",children:/*#__PURE__*/_jsx(\"h1\",{children:city.nombre})},city.nombre),//revisar nuevamente para ver correctamente el saveCities.length\ncheckInclude([city.lat,city.lon])?/*#__PURE__*/_jsx(\"button\",{className:\"gap-2 p-2\",onClick:()=>handleRemoveCity(city),title:\"Eliminar de favoritos\",children:/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-between hover:scale-110 transition-transform\",children:/*#__PURE__*/_jsx(Thrash,{prop:props.isDarkMode})})}):/*#__PURE__*/_jsx(\"button\",{className:\"gap-2 p-2\",onClick:()=>handleAddCity(city),children:/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-between hover:scale-110 transition-transform\",children:saveCities.length>=2?null:/*#__PURE__*/_jsx(Add,{prop:props.isDarkMode})})})]},city.nombre))});}else{return/*#__PURE__*/_jsx(\"div\",{className:\"absolute left-0 right-0 bottom-full sm:bottom-auto sm:mb-2 p-2 flex flex-col items-left justify-center gap-2 overflow-y-auto min-w-[448px] w-auto max-h-52 z-50  bg-slate-300 dark:bg-slate-600 rounded-md sm:rounded-md\",children:\"Demasiadas coincidencias, sea m\\xE1s espec\\xEDfico\"});}}else{return/*#__PURE__*/_jsx(\"div\",{className:\"absolute left-0 right-0 bottom-full sm:bottom-auto sm:mb-2 p-2 flex flex-col items-left justify-center gap-2 overflow-y-auto min-w-[448px] w-auto max-h-52 z-50  bg-slate-300 dark:bg-slate-600 rounded-md sm:rounded-md\",children:\"No se encontraron resultados\"});}};return/*#__PURE__*/_jsxs(\"div\",{className:\"w-full max-w-md relative\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"search\",placeholder:\"Buscar ciudad...\",onChange:handleSearch,value:filter,className:\"w-full h-full rounded-md p-2 transition-colors bg-gray-200 text-gray-700 dark:bg-gray-700 dark:text-white\",title:\"Buscar ciudad\"}),/*#__PURE__*/_jsx(Ciudades,{filter:filter})]});};export default Search;","map":{"version":3,"names":["useState","db","useDispatch","useSelector","setCoords","setSaveCities","removeSaveCities","Add","Thrash","jsx","_jsx","jsxs","_jsxs","Search","props","filter","setFilter","cities","ciudades","dispatch","saveCities","state","value","handleSearch","event","target","handleClick","ciudad","ciudadCoords","lat","lon","handleAddCity","handleRemoveCity","checkInclude","includes","some","a","length","every","v","i","Ciudades","_ref","results","city","nombre","toLowerCase","className","children","map","title","onClick","prop","isDarkMode","type","placeholder","onChange"],"sources":["C:/Users/HOME/Documents/weather-app/src/Components/Search.js"],"sourcesContent":["import { useState } from \"react\";\r\nimport db from \"../db.json\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { setCoords, setSaveCities, removeSaveCities } from \"../redux/reducers\";\r\nimport { Add, Thrash } from \"../Images/svg\";\r\n\r\nconst Search = (props) => {\r\n  const [filter, setFilter] = useState(\"\");\r\n  const cities = db.ciudades;\r\n  const dispatch = useDispatch();\r\n  const saveCities = useSelector((state) => state.saveCities.value);\r\n\r\n  const handleSearch = (event) => {\r\n    setFilter(event.target.value);\r\n  };\r\n\r\n  const handleClick = (ciudad) => {\r\n    const ciudadCoords = [ciudad.lat, ciudad.lon];\r\n    //console.log(ciudadCoords);\r\n    dispatch(setCoords(ciudadCoords));\r\n    setFilter(\"\");\r\n  };\r\n  const handleAddCity = (ciudad) => {\r\n    const ciudadCoords = [ciudad.lat, ciudad.lon];\r\n    //console.log(ciudadCoords);\r\n    dispatch(setSaveCities(ciudadCoords));\r\n    setFilter(\"\");\r\n  };\r\n\r\n  const handleRemoveCity = (ciudad) => {\r\n    const ciudadCoords = [ciudad.lat, ciudad.lon];\r\n    //console.log(ciudadCoords);\r\n    dispatch(removeSaveCities(ciudadCoords));\r\n  };\r\n\r\n  const checkInclude = (ciudad) => {\r\n    let includes = saveCities.some(\r\n      (a) => saveCities.length && ciudad.every((v, i) => v === a[i])\r\n    );\r\n    return includes;\r\n  };\r\n  const Ciudades = ({ filter }) => {\r\n    const results = cities.filter((city) =>\r\n      city.nombre.toLowerCase().includes(filter.toLowerCase())\r\n    );\r\n\r\n    //console.log(results);\r\n    if (filter === \"\") {\r\n      return;\r\n    }\r\n    if (results.length > 0) {\r\n      if (results.length < 5) {\r\n        return (\r\n          <div className=\"absolute left-0 right-0 bottom-full sm:bottom-auto sm:mb-2 flex flex-col items-left justify-center gap-2 overflow-y-auto min-w-full max-h-52 z-10 bg-slate-300 dark:bg-slate-600 rounded-md sm:rounded-md\">\r\n            {results.map((city) => (\r\n              <div\r\n                key={city.nombre}\r\n                className=\"flex flex-1 hover:bg-slate-500 dark:hover:bg-slate-500\"\r\n                title=\"Agregar a favoritos\"\r\n              >\r\n                <button\r\n                  onClick={() => handleClick(city)}\r\n                  className=\"flex items-center justify-between gap-2 p-2 text-lg font-semibold h-full w-full\"\r\n                  key={city.nombre}\r\n                >\r\n                  <h1>{city.nombre}</h1>\r\n                </button>\r\n                {\r\n                  //revisar nuevamente para ver correctamente el saveCities.length\r\n\r\n                  checkInclude([city.lat, city.lon]) ? (\r\n                    <button\r\n                      className=\"gap-2 p-2\"\r\n                      onClick={() => handleRemoveCity(city)}\r\n                      title=\"Eliminar de favoritos\"\r\n                    >\r\n                      <div className=\"flex items-center justify-between hover:scale-110 transition-transform\">\r\n                        <Thrash prop={props.isDarkMode} />\r\n                      </div>\r\n                    </button>\r\n                  ) : (\r\n                    <button\r\n                      className=\"gap-2 p-2\"\r\n                      onClick={() => handleAddCity(city)}\r\n                    >\r\n                      <div className=\"flex items-center justify-between hover:scale-110 transition-transform\">\r\n                        {saveCities.length >= 2 ? null : (\r\n                          <Add prop={props.isDarkMode} />\r\n                        )}\r\n                      </div>\r\n                    </button>\r\n                  )\r\n                }\r\n              </div>\r\n            ))}\r\n          </div>\r\n        );\r\n      } else {\r\n        return (\r\n          <div className=\"absolute left-0 right-0 bottom-full sm:bottom-auto sm:mb-2 p-2 flex flex-col items-left justify-center gap-2 overflow-y-auto min-w-[448px] w-auto max-h-52 z-50  bg-slate-300 dark:bg-slate-600 rounded-md sm:rounded-md\">\r\n            Demasiadas coincidencias, sea más específico\r\n          </div>\r\n        );\r\n      }\r\n    } else {\r\n      return (\r\n        <div className=\"absolute left-0 right-0 bottom-full sm:bottom-auto sm:mb-2 p-2 flex flex-col items-left justify-center gap-2 overflow-y-auto min-w-[448px] w-auto max-h-52 z-50  bg-slate-300 dark:bg-slate-600 rounded-md sm:rounded-md\">\r\n          No se encontraron resultados\r\n        </div>\r\n      );\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"w-full max-w-md relative\">\r\n      <input\r\n        type=\"search\"\r\n        placeholder=\"Buscar ciudad...\"\r\n        onChange={handleSearch}\r\n        value={filter}\r\n        className=\"w-full h-full rounded-md p-2 transition-colors bg-gray-200 text-gray-700 dark:bg-gray-700 dark:text-white\"\r\n        title=\"Buscar ciudad\"\r\n      />\r\n      <Ciudades filter={filter} />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Search;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}